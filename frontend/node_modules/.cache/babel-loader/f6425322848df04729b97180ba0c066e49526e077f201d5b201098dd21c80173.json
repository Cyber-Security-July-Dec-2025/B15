{"ast":null,"code":"var _jsxFileName = \"/home/rounak-dagar/securechat/frontend/src/components/Chat/ChatContainer.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { usersAPI, messagesAPI } from '../../services/api';\nimport { hybridEncryptMessage, hybridDecryptMessage, decryptPrivateKeyAES } from '../../services/crypto';\nimport { getSocket } from '../../services/socket';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChatContainer = ({\n  currentUser,\n  showStatus\n}) => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Cache decrypted private key for session\n  const decryptedPrivateKeyRef = useRef(null);\n  const passphraseRef = useRef('');\n  useEffect(() => {\n    usersAPI.getAllUsers().then(res => setUsers(res.data));\n  }, []);\n  useEffect(() => {\n    if (selectedUser) {\n      messagesAPI.getConversation(selectedUser.username).then(res => setMessages(res.data));\n    }\n  }, [selectedUser]);\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n    socket.on('receive_message', msg => {\n      if (msg.from === (selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username) || msg.to === (selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username)) {\n        setMessages(prev => [...prev, msg]);\n      }\n    });\n    return () => {\n      socket.off('receive_message');\n    };\n  }, [selectedUser]);\n\n  // Prompt for password and decrypt private key once per session\n  const getDecryptedPrivateKey = async () => {\n    if (decryptedPrivateKeyRef.current) return decryptedPrivateKeyRef.current;\n    const encryptedPrivateKey = localStorage.getItem('privateKey');\n    let passphrase = passphraseRef.current;\n    if (!passphrase) {\n      passphrase = window.prompt('Enter your password to decrypt your private key:');\n      passphraseRef.current = passphrase;\n    }\n    try {\n      const privateKeyArmored = await decryptPrivateKeyAES(encryptedPrivateKey, passphrase);\n      decryptedPrivateKeyRef.current = privateKeyArmored;\n      return privateKeyArmored;\n    } catch (err) {\n      showStatus('Failed to decrypt private key. Wrong password?', 'error');\n      decryptedPrivateKeyRef.current = null;\n      passphraseRef.current = '';\n      throw err;\n    }\n  };\n  const sendMessage = async e => {\n    e.preventDefault();\n    if (!input || !selectedUser) return;\n    setLoading(true);\n    try {\n      const {\n        encryptedMessage,\n        encryptedAESKey\n      } = await hybridEncryptMessage(input, selectedUser.publicKey);\n      const messageData = {\n        to: selectedUser.username,\n        encryptedContent: encryptedMessage,\n        encryptedAESKey,\n        messageType: 'text'\n      };\n      await messagesAPI.sendMessage(messageData);\n      // Add plaintext to local message for sender\n      setMessages(prev => [...prev, {\n        from: currentUser.username,\n        to: selectedUser.username,\n        encryptedContent: encryptedMessage,\n        encryptedAESKey,\n        messageType: 'text',\n        plaintext: input // <-- add this line\n      }]);\n      getSocket().emit('send_message', {\n        from: currentUser.username,\n        to: selectedUser.username,\n        encryptedContent: encryptedMessage,\n        encryptedAESKey,\n        messageType: 'text'\n      });\n      setInput('');\n      showStatus('Message sent', 'success');\n    } catch (err) {\n      showStatus('Failed to send message', 'error');\n    }\n    setLoading(false);\n  };\n  const renderMessages = () => messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(MessageItem, {\n    msg: msg,\n    currentUser: currentUser,\n    getDecryptedPrivateKey: getDecryptedPrivateKey\n  }, idx, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"user-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: users.map(user => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSelectedUser(user),\n            children: [user.username, \" \", user.isOnline ? 'ðŸŸ¢' : 'âšª']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this)\n        }, user.username, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"chat-main\",\n      children: selectedUser ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Chat with \", selectedUser.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messages\",\n          children: renderMessages()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: sendMessage,\n          className: \"send-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: input,\n            onChange: e => setInput(e.target.value),\n            placeholder: \"Type your message...\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Select a user to start chatting.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatContainer, \"GJpm+MdPniKdLATSdJsToePJPDc=\");\n_c = ChatContainer;\nconst MessageItem = ({\n  msg,\n  currentUser,\n  getDecryptedPrivateKey\n}) => {\n  _s2();\n  const [decrypted, setDecrypted] = useState('');\n  useEffect(() => {\n    const decrypt = async () => {\n      if (msg.from === currentUser.username && msg.plaintext) {\n        // Show plaintext for messages sent by the current user\n        setDecrypted(msg.plaintext);\n      } else {\n        try {\n          const privateKeyArmored = await getDecryptedPrivateKey();\n          const dec = await hybridDecryptMessage(msg.encryptedContent, msg.encryptedAESKey, privateKeyArmored);\n          setDecrypted(dec);\n        } catch {\n          setDecrypted('[Encrypted]');\n        }\n      }\n    };\n    decrypt();\n  }, [msg, currentUser]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `message ${msg.from === currentUser.username ? 'sent' : 'received'}`,\n    children: decrypted\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 10\n  }, this);\n};\n_s2(MessageItem, \"p5qMHw/IAbEL1ybyHdCYv2QSVmY=\");\n_c2 = MessageItem;\nexport default ChatContainer;\nvar _c, _c2;\n$RefreshReg$(_c, \"ChatContainer\");\n$RefreshReg$(_c2, \"MessageItem\");","map":{"version":3,"names":["React","useState","useEffect","useRef","usersAPI","messagesAPI","hybridEncryptMessage","hybridDecryptMessage","decryptPrivateKeyAES","getSocket","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatContainer","currentUser","showStatus","_s","users","setUsers","selectedUser","setSelectedUser","messages","setMessages","input","setInput","loading","setLoading","decryptedPrivateKeyRef","passphraseRef","getAllUsers","then","res","data","getConversation","username","socket","on","msg","from","to","prev","off","getDecryptedPrivateKey","current","encryptedPrivateKey","localStorage","getItem","passphrase","window","prompt","privateKeyArmored","err","sendMessage","e","preventDefault","encryptedMessage","encryptedAESKey","publicKey","messageData","encryptedContent","messageType","plaintext","emit","renderMessages","map","idx","MessageItem","fileName","_jsxFileName","lineNumber","columnNumber","className","children","user","onClick","isOnline","onSubmit","type","value","onChange","target","placeholder","required","disabled","_c","_s2","decrypted","setDecrypted","decrypt","dec","_c2","$RefreshReg$"],"sources":["/home/rounak-dagar/securechat/frontend/src/components/Chat/ChatContainer.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { usersAPI, messagesAPI } from '../../services/api';\nimport { hybridEncryptMessage, hybridDecryptMessage, decryptPrivateKeyAES } from '../../services/crypto';\nimport { getSocket } from '../../services/socket';\n\nconst ChatContainer = ({ currentUser, showStatus }) => {\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Cache decrypted private key for session\n  const decryptedPrivateKeyRef = useRef(null);\n  const passphraseRef = useRef('');\n\n  useEffect(() => {\n    usersAPI.getAllUsers().then(res => setUsers(res.data));\n  }, []);\n\n  useEffect(() => {\n    if (selectedUser) {\n      messagesAPI.getConversation(selectedUser.username).then(res => setMessages(res.data));\n    }\n  }, [selectedUser]);\n\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n    socket.on('receive_message', (msg) => {\n      if (msg.from === selectedUser?.username || msg.to === selectedUser?.username) {\n        setMessages(prev => [...prev, msg]);\n      }\n    });\n    return () => {\n      socket.off('receive_message');\n    };\n  }, [selectedUser]);\n\n  // Prompt for password and decrypt private key once per session\n  const getDecryptedPrivateKey = async () => {\n    if (decryptedPrivateKeyRef.current) return decryptedPrivateKeyRef.current;\n    const encryptedPrivateKey = localStorage.getItem('privateKey');\n    let passphrase = passphraseRef.current;\n    if (!passphrase) {\n      passphrase = window.prompt('Enter your password to decrypt your private key:');\n      passphraseRef.current = passphrase;\n    }\n    try {\n      const privateKeyArmored = await decryptPrivateKeyAES(encryptedPrivateKey, passphrase);\n      decryptedPrivateKeyRef.current = privateKeyArmored;\n      return privateKeyArmored;\n    } catch (err) {\n      showStatus('Failed to decrypt private key. Wrong password?', 'error');\n      decryptedPrivateKeyRef.current = null;\n      passphraseRef.current = '';\n      throw err;\n    }\n  };\n\n  const sendMessage = async (e) => {\n    e.preventDefault();\n    if (!input || !selectedUser) return;\n    setLoading(true);\n    try {\n      const { encryptedMessage, encryptedAESKey } = await hybridEncryptMessage(input, selectedUser.publicKey);\n      const messageData = {\n        to: selectedUser.username,\n        encryptedContent: encryptedMessage,\n        encryptedAESKey,\n        messageType: 'text'\n      };\n      await messagesAPI.sendMessage(messageData);\n      // Add plaintext to local message for sender\n      setMessages(prev => [\n        ...prev,\n        {\n          from: currentUser.username,\n          to: selectedUser.username,\n          encryptedContent: encryptedMessage,\n          encryptedAESKey,\n          messageType: 'text',\n          plaintext: input // <-- add this line\n        }\n      ]);\n      getSocket().emit('send_message', {\n        from: currentUser.username,\n        to: selectedUser.username,\n        encryptedContent: encryptedMessage,\n        encryptedAESKey,\n        messageType: 'text'\n      });\n      setInput('');\n      showStatus('Message sent', 'success');\n    } catch (err) {\n      showStatus('Failed to send message', 'error');\n    }\n    setLoading(false);\n  };\n\n  const renderMessages = () => messages.map((msg, idx) => (\n    <MessageItem key={idx} msg={msg} currentUser={currentUser} getDecryptedPrivateKey={getDecryptedPrivateKey} />\n  ));\n\n  return (\n    <div className=\"chat-container\">\n      <aside className=\"user-list\">\n        <h3>Users</h3>\n        <ul>\n          {users.map(user => (\n            <li key={user.username}>\n              <button onClick={() => setSelectedUser(user)}>\n                {user.username} {user.isOnline ? 'ðŸŸ¢' : 'âšª'}\n              </button>\n            </li>\n          ))}\n        </ul>\n      </aside>\n      <main className=\"chat-main\">\n        {selectedUser ? (\n          <>\n            <h3>Chat with {selectedUser.username}</h3>\n            <div className=\"messages\">{renderMessages()}</div>\n            <form onSubmit={sendMessage} className=\"send-form\">\n              <input\n                type=\"text\"\n                value={input}\n                onChange={e => setInput(e.target.value)}\n                placeholder=\"Type your message...\"\n                required\n              />\n              <button type=\"submit\" disabled={loading}>Send</button>\n            </form>\n          </>\n        ) : (\n          <div>Select a user to start chatting.</div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nconst MessageItem = ({ msg, currentUser, getDecryptedPrivateKey }) => {\n  const [decrypted, setDecrypted] = useState('');\n\n  useEffect(() => {\n    const decrypt = async () => {\n      if (msg.from === currentUser.username && msg.plaintext) {\n        // Show plaintext for messages sent by the current user\n        setDecrypted(msg.plaintext);\n      } else {\n        try {\n          const privateKeyArmored = await getDecryptedPrivateKey();\n          const dec = await hybridDecryptMessage(msg.encryptedContent, msg.encryptedAESKey, privateKeyArmored);\n          setDecrypted(dec);\n        } catch {\n          setDecrypted('[Encrypted]');\n        }\n      }\n    };\n    decrypt();\n  }, [msg, currentUser]);\n\n  return <div className={`message ${msg.from === currentUser.username ? 'sent' : 'received'}`}>{decrypted}</div>;\n};\n\nexport default ChatContainer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}