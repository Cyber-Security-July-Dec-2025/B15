{"ast":null,"code":"var _jsxFileName = \"/home/rounak-dagar/securechat/frontend/src/components/Chat/ChatContainer.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { usersAPI, messagesAPI } from '../../services/api';\nimport { hybridEncryptMessage, hybridDecryptMessage, decryptPrivateKeyAES } from '../../services/crypto';\nimport { getSocket } from '../../services/socket';\nimport { PaperAirplaneIcon, LockClosedIcon, PhoneIcon, EllipsisVerticalIcon, MagnifyingGlassIcon, FaceSmileIcon, PaperClipIcon, UserCircleIcon, Bars3Icon } from '@heroicons/react/24/solid';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChatContainer = ({\n  currentUser,\n  showStatus\n}) => {\n  _s();\n  const [isSidebarOpen, setSidebarOpen] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const decryptedPrivateKeyRef = useRef(null);\n  const passphraseRef = useRef('');\n  useEffect(() => {\n    usersAPI.getAllUsers().then(res => setUsers(res.data));\n  }, []);\n  useEffect(() => {\n    if (selectedUser) {\n      messagesAPI.getConversation(selectedUser.username).then(res => setMessages(res.data));\n      setSidebarOpen(false);\n    }\n  }, [selectedUser]);\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n    socket.on('receive_message', msg => {\n      if (msg.from === (selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username) || msg.to === (selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username)) {\n        setMessages(prev => [...prev, msg]);\n      }\n    });\n    return () => socket.off('receive_message');\n  }, [selectedUser]);\n  const getDecryptedPrivateKey = async () => {\n    if (decryptedPrivateKeyRef.current) return decryptedPrivateKeyRef.current;\n    const encryptedPrivateKey = localStorage.getItem('privateKey');\n    let passphrase = passphraseRef.current;\n    if (!passphrase) {\n      passphrase = window.prompt('Enter your password to decrypt your private key:');\n      passphraseRef.current = passphrase;\n    }\n    try {\n      const privateKeyArmored = await decryptPrivateKeyAES(encryptedPrivateKey, passphrase);\n      decryptedPrivateKeyRef.current = privateKeyArmored;\n      return privateKeyArmored;\n    } catch (err) {\n      showStatus('Failed to decrypt private key. Wrong password?', 'error');\n      decryptedPrivateKeyRef.current = null;\n      passphraseRef.current = '';\n      throw err;\n    }\n  };\n  const sendMessage = async e => {\n    e.preventDefault();\n    if (!input || !selectedUser) return;\n    setLoading(true);\n    try {\n      const {\n        encryptedMessage,\n        encryptedAESKey\n      } = await hybridEncryptMessage(input, selectedUser.publicKey);\n      const messageData = {\n        to: selectedUser.username,\n        encryptedContent: encryptedMessage,\n        encryptedAESKey,\n        messageType: 'text'\n      };\n      await messagesAPI.sendMessage(messageData);\n      setMessages(prev => [...prev, {\n        from: currentUser.username,\n        to: selectedUser.username,\n        encryptedContent: encryptedMessage,\n        encryptedAESKey,\n        messageType: 'text',\n        plaintext: input\n      }]);\n      getSocket().emit('send_message', {\n        from: currentUser.username,\n        to: selectedUser.username,\n        encryptedContent: encryptedMessage,\n        encryptedAESKey,\n        messageType: 'text'\n      });\n      setInput('');\n      showStatus('Message sent', 'success');\n    } catch (err) {\n      showStatus('Failed to send message', 'error');\n    }\n    setLoading(false);\n  };\n  const getAvatar = username => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center w-10 h-10 rounded-full bg-indigo-500 text-white font-semibold text-lg select-none\",\n    children: username.slice(0, 2).toUpperCase()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n  const getLastPreview = user => \"Click to view messages\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-screen bg-gray-900 text-gray-100 font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      className: `fixed md:relative top-0 left-0 w-64 h-full bg-gray-800 border-r border-gray-700 transform ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0 transition-transform duration-300 ease-in-out z-30`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-b border-gray-700\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-bold\",\n          children: \"SecureChat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search or start new chat\",\n            className: \"w-full pl-10 pr-4 py-2 rounded-lg bg-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MagnifyingGlassIcon, {\n            className: \"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-y-auto h-[calc(100%-144px)] px-2 pb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-2\",\n          children: users.map(user => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSelectedUser(user),\n              className: `w-full flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition ${(selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username) === user.username ? 'bg-gray-700' : ''}`,\n              children: [getAvatar(user.username), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold truncate\",\n                  children: user.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-400 truncate\",\n                  children: getLastPreview(user)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `w-3 h-3 rounded-full border-2 border-gray-800 ${user.isOnline ? 'bg-green-400' : 'bg-gray-500'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 17\n            }, this)\n          }, user.username, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-1 flex-col\",\n      children: selectedUser ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between px-4 py-3 bg-gray-900 border-b border-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSidebarOpen(true),\n              className: \"md:hidden p-2 hover:bg-gray-700 rounded-full transition\",\n              children: /*#__PURE__*/_jsxDEV(Bars3Icon, {\n                className: \"w-6 h-6 text-gray-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 17\n            }, this), getAvatar(selectedUser.username), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-bold\",\n                children: selectedUser.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center text-xs text-gray-400 gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `w-2 h-2 rounded-full ${selectedUser.isOnline ? 'bg-green-400' : 'bg-gray-500'}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 21\n                }, this), selectedUser.isOnline ? 'Online' : 'Offline']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-2 hover:bg-gray-700 rounded-full transition\",\n              children: /*#__PURE__*/_jsxDEV(PhoneIcon, {\n                className: \"w-5 h-5 text-gray-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 83\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-2 hover:bg-gray-700 rounded-full transition\",\n              children: /*#__PURE__*/_jsxDEV(EllipsisVerticalIcon, {\n                className: \"w-5 h-5 text-gray-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 83\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-y-auto p-4 flex flex-col-reverse space-y-2 space-y-reverse\",\n          children: messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(MessageItem, {\n            msg: msg,\n            currentUser: currentUser,\n            getDecryptedPrivateKey: getDecryptedPrivateKey\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 43\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: sendMessage,\n          className: \"flex items-center gap-3 p-4 bg-gray-800 border-t border-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"p-2 hover:bg-gray-700 rounded-full transition\",\n            children: /*#__PURE__*/_jsxDEV(FaceSmileIcon, {\n              className: \"w-6 h-6 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 95\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"p-2 hover:bg-gray-700 rounded-full transition\",\n            children: /*#__PURE__*/_jsxDEV(PaperClipIcon, {\n              className: \"w-6 h-6 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 95\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: input,\n            onChange: e => setInput(e.target.value),\n            placeholder: \"Type a message...\",\n            required: true,\n            rows: 1,\n            className: \"flex-1 resize-none bg-gray-900 text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 placeholder-gray-500\",\n            style: {\n              maxHeight: '150px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading || !input,\n            className: \"p-3 bg-indigo-600 hover:bg-indigo-700 rounded-full transition disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: /*#__PURE__*/_jsxDEV(PaperAirplaneIcon, {\n              className: \"w-6 h-6 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center justify-center h-full text-center p-6\",\n        children: [/*#__PURE__*/_jsxDEV(UserCircleIcon, {\n          className: \"w-24 h-24 text-gray-600 mb-6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold mb-2\",\n          children: \"Welcome to SecureChat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-400\",\n          children: \"Select a user to start chatting.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatContainer, \"f0yncB5IJwVj8ev6yD6cs6bWlAY=\");\n_c = ChatContainer;\nconst MessageItem = ({\n  msg,\n  currentUser,\n  getDecryptedPrivateKey\n}) => {\n  _s2();\n  const [decrypted, setDecrypted] = useState('');\n  useEffect(() => {\n    const decrypt = async () => {\n      if (msg.from === currentUser.username && msg.plaintext) {\n        setDecrypted(msg.plaintext);\n      } else {\n        try {\n          const privateKeyArmored = await getDecryptedPrivateKey();\n          const dec = await hybridDecryptMessage(msg.encryptedContent, msg.encryptedAESKey, privateKeyArmored);\n          setDecrypted(dec);\n        } catch {\n          setDecrypted('[Encrypted]');\n        }\n      }\n    };\n    decrypt();\n  }, [msg, currentUser, getDecryptedPrivateKey]);\n  const isSent = msg.from === currentUser.username;\n  const bubbleClasses = isSent ? 'bg-indigo-600 text-white self-end rounded-xl shadow' : 'bg-gray-700 text-gray-200 self-start rounded-xl shadow';\n  const alignClasses = isSent ? 'justify-end' : 'justify-start';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex w-full ${alignClasses}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `max-w-xl px-4 py-2 ${bubbleClasses}`,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"break-words\",\n        children: decrypted\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-right text-xs text-gray-300 mt-1\",\n        children: new Date(msg.timestamp || Date.now()).toLocaleTimeString([], {\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n};\n_s2(MessageItem, \"p5qMHw/IAbEL1ybyHdCYv2QSVmY=\");\n_c2 = MessageItem;\nexport default ChatContainer;\nvar _c, _c2;\n$RefreshReg$(_c, \"ChatContainer\");\n$RefreshReg$(_c2, \"MessageItem\");","map":{"version":3,"names":["React","useState","useEffect","useRef","usersAPI","messagesAPI","hybridEncryptMessage","hybridDecryptMessage","decryptPrivateKeyAES","getSocket","PaperAirplaneIcon","LockClosedIcon","PhoneIcon","EllipsisVerticalIcon","MagnifyingGlassIcon","FaceSmileIcon","PaperClipIcon","UserCircleIcon","Bars3Icon","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatContainer","currentUser","showStatus","_s","isSidebarOpen","setSidebarOpen","users","setUsers","selectedUser","setSelectedUser","messages","setMessages","input","setInput","loading","setLoading","decryptedPrivateKeyRef","passphraseRef","getAllUsers","then","res","data","getConversation","username","socket","on","msg","from","to","prev","off","getDecryptedPrivateKey","current","encryptedPrivateKey","localStorage","getItem","passphrase","window","prompt","privateKeyArmored","err","sendMessage","e","preventDefault","encryptedMessage","encryptedAESKey","publicKey","messageData","encryptedContent","messageType","plaintext","emit","getAvatar","className","children","slice","toUpperCase","fileName","_jsxFileName","lineNumber","columnNumber","getLastPreview","user","type","placeholder","map","onClick","isOnline","idx","MessageItem","onSubmit","value","onChange","target","required","rows","style","maxHeight","disabled","_c","_s2","decrypted","setDecrypted","decrypt","dec","isSent","bubbleClasses","alignClasses","Date","timestamp","now","toLocaleTimeString","hour","minute","_c2","$RefreshReg$"],"sources":["/home/rounak-dagar/securechat/frontend/src/components/Chat/ChatContainer.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { usersAPI, messagesAPI } from '../../services/api';\nimport { hybridEncryptMessage, hybridDecryptMessage, decryptPrivateKeyAES } from '../../services/crypto';\nimport { getSocket } from '../../services/socket';\nimport { PaperAirplaneIcon, LockClosedIcon, PhoneIcon, EllipsisVerticalIcon, MagnifyingGlassIcon, FaceSmileIcon, PaperClipIcon, UserCircleIcon, Bars3Icon } from '@heroicons/react/24/solid';\n\nconst ChatContainer = ({ currentUser, showStatus }) => {\n  const [isSidebarOpen, setSidebarOpen] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const decryptedPrivateKeyRef = useRef(null);\n  const passphraseRef = useRef('');\n\n  useEffect(() => {\n    usersAPI.getAllUsers().then(res => setUsers(res.data));\n  }, []);\n\n  useEffect(() => {\n    if (selectedUser) {\n      messagesAPI.getConversation(selectedUser.username).then(res => setMessages(res.data));\n      setSidebarOpen(false);\n    }\n  }, [selectedUser]);\n\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n    socket.on('receive_message', msg => {\n      if (msg.from === selectedUser?.username || msg.to === selectedUser?.username) {\n        setMessages(prev => [...prev, msg]);\n      }\n    });\n    return () => socket.off('receive_message');\n  }, [selectedUser]);\n\n  const getDecryptedPrivateKey = async () => {\n    if (decryptedPrivateKeyRef.current) return decryptedPrivateKeyRef.current;\n    const encryptedPrivateKey = localStorage.getItem('privateKey');\n    let passphrase = passphraseRef.current;\n    if (!passphrase) {\n      passphrase = window.prompt('Enter your password to decrypt your private key:');\n      passphraseRef.current = passphrase;\n    }\n    try {\n      const privateKeyArmored = await decryptPrivateKeyAES(encryptedPrivateKey, passphrase);\n      decryptedPrivateKeyRef.current = privateKeyArmored;\n      return privateKeyArmored;\n    } catch (err) {\n      showStatus('Failed to decrypt private key. Wrong password?', 'error');\n      decryptedPrivateKeyRef.current = null;\n      passphraseRef.current = '';\n      throw err;\n    }\n  };\n\n  const sendMessage = async (e) => {\n    e.preventDefault();\n    if (!input || !selectedUser) return;\n    setLoading(true);\n    try {\n      const { encryptedMessage, encryptedAESKey } = await hybridEncryptMessage(input, selectedUser.publicKey);\n      const messageData = {\n        to: selectedUser.username,\n        encryptedContent: encryptedMessage,\n        encryptedAESKey,\n        messageType: 'text'\n      };\n      await messagesAPI.sendMessage(messageData);\n      setMessages(prev => [\n        ...prev,\n        {\n          from: currentUser.username,\n          to: selectedUser.username,\n          encryptedContent: encryptedMessage,\n          encryptedAESKey,\n          messageType: 'text',\n          plaintext: input\n        }\n      ]);\n      getSocket().emit('send_message', {\n        from: currentUser.username,\n        to: selectedUser.username,\n        encryptedContent: encryptedMessage,\n        encryptedAESKey,\n        messageType: 'text'\n      });\n      setInput('');\n      showStatus('Message sent', 'success');\n    } catch (err) {\n      showStatus('Failed to send message', 'error');\n    }\n    setLoading(false);\n  };\n\n  const getAvatar = (username) => (\n    <div className=\"flex items-center justify-center w-10 h-10 rounded-full bg-indigo-500 text-white font-semibold text-lg select-none\">\n      {username.slice(0, 2).toUpperCase()}\n    </div>\n  );\n\n  const getLastPreview = (user) => \"Click to view messages\";\n\n  return (\n    <div className=\"flex h-screen bg-gray-900 text-gray-100 font-sans\">\n      {/* Sidebar */}\n      <aside className={`fixed md:relative top-0 left-0 w-64 h-full bg-gray-800 border-r border-gray-700 transform ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0 transition-transform duration-300 ease-in-out z-30`}>\n        <div className=\"p-4 border-b border-gray-700\">\n          <h1 className=\"text-xl font-bold\">SecureChat</h1>\n        </div>\n        <div className=\"p-4\">\n          <div className=\"relative\">\n            <input type=\"text\" placeholder=\"Search or start new chat\" className=\"w-full pl-10 pr-4 py-2 rounded-lg bg-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500\" />\n            <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500\" />\n          </div>\n        </div>\n        <div className=\"overflow-y-auto h-[calc(100%-144px)] px-2 pb-4\">\n          <ul className=\"space-y-2\">\n            {users.map(user => (\n              <li key={user.username}>\n                <button onClick={() => setSelectedUser(user)} className={`w-full flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition ${selectedUser?.username === user.username ? 'bg-gray-700' : ''}`}>\n                  {getAvatar(user.username)}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"font-semibold truncate\">{user.username}</div>\n                    <div className=\"text-sm text-gray-400 truncate\">{getLastPreview(user)}</div>\n                  </div>\n                  <span className={`w-3 h-3 rounded-full border-2 border-gray-800 ${user.isOnline ? 'bg-green-400' : 'bg-gray-500'}`}></span>\n                </button>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </aside>\n\n      {/* Chat Area */}\n      <div className=\"flex flex-1 flex-col\">\n        {selectedUser ? (\n          <>\n            {/* Header */}\n            <div className=\"flex items-center justify-between px-4 py-3 bg-gray-900 border-b border-gray-700\">\n              <div className=\"flex items-center gap-3\">\n                <button onClick={() => setSidebarOpen(true)} className=\"md:hidden p-2 hover:bg-gray-700 rounded-full transition\">\n                  <Bars3Icon className=\"w-6 h-6 text-gray-400\" />\n                </button>\n                {getAvatar(selectedUser.username)}\n                <div>\n                  <div className=\"font-bold\">{selectedUser.username}</div>\n                  <div className=\"flex items-center text-xs text-gray-400 gap-1\">\n                    <span className={`w-2 h-2 rounded-full ${selectedUser.isOnline ? 'bg-green-400' : 'bg-gray-500'}`}></span>\n                    {selectedUser.isOnline ? 'Online' : 'Offline'}\n                  </div>\n                </div>\n              </div>\n              <div className=\"flex gap-2\">\n                <button className=\"p-2 hover:bg-gray-700 rounded-full transition\"><PhoneIcon className=\"w-5 h-5 text-gray-400\" /></button>\n                <button className=\"p-2 hover:bg-gray-700 rounded-full transition\"><EllipsisVerticalIcon className=\"w-5 h-5 text-gray-400\" /></button>\n              </div>\n            </div>\n\n            {/* Messages */}\n            <div className=\"flex-1 overflow-y-auto p-4 flex flex-col-reverse space-y-2 space-y-reverse\">\n              {messages.map((msg, idx) => <MessageItem key={idx} msg={msg} currentUser={currentUser} getDecryptedPrivateKey={getDecryptedPrivateKey} />)}\n            </div>\n\n            {/* Input */}\n            <form onSubmit={sendMessage} className=\"flex items-center gap-3 p-4 bg-gray-800 border-t border-gray-700\">\n              <button type=\"button\" className=\"p-2 hover:bg-gray-700 rounded-full transition\"><FaceSmileIcon className=\"w-6 h-6 text-gray-400\" /></button>\n              <button type=\"button\" className=\"p-2 hover:bg-gray-700 rounded-full transition\"><PaperClipIcon className=\"w-6 h-6 text-gray-400\" /></button>\n              <textarea value={input} onChange={e => setInput(e.target.value)} placeholder=\"Type a message...\" required rows={1} className=\"flex-1 resize-none bg-gray-900 text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 placeholder-gray-500\" style={{ maxHeight: '150px' }} />\n              <button type=\"submit\" disabled={loading || !input} className=\"p-3 bg-indigo-600 hover:bg-indigo-700 rounded-full transition disabled:opacity-50 disabled:cursor-not-allowed\">\n                <PaperAirplaneIcon className=\"w-6 h-6 text-white\" />\n              </button>\n            </form>\n          </>\n        ) : (\n          <div className=\"flex flex-col items-center justify-center h-full text-center p-6\">\n            <UserCircleIcon className=\"w-24 h-24 text-gray-600 mb-6\" />\n            <h2 className=\"text-2xl font-semibold mb-2\">Welcome to SecureChat</h2>\n            <p className=\"text-gray-400\">Select a user to start chatting.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst MessageItem = ({ msg, currentUser, getDecryptedPrivateKey }) => {\n  const [decrypted, setDecrypted] = useState('');\n\n  useEffect(() => {\n    const decrypt = async () => {\n      if (msg.from === currentUser.username && msg.plaintext) {\n        setDecrypted(msg.plaintext);\n      } else {\n        try {\n          const privateKeyArmored = await getDecryptedPrivateKey();\n          const dec = await hybridDecryptMessage(msg.encryptedContent, msg.encryptedAESKey, privateKeyArmored);\n          setDecrypted(dec);\n        } catch {\n          setDecrypted('[Encrypted]');\n        }\n      }\n    };\n    decrypt();\n  }, [msg, currentUser, getDecryptedPrivateKey]);\n\n  const isSent = msg.from === currentUser.username;\n  const bubbleClasses = isSent\n    ? 'bg-indigo-600 text-white self-end rounded-xl shadow'\n    : 'bg-gray-700 text-gray-200 self-start rounded-xl shadow';\n  const alignClasses = isSent ? 'justify-end' : 'justify-start';\n\n  return (\n    <div className={`flex w-full ${alignClasses}`}>\n      <div className={`max-w-xl px-4 py-2 ${bubbleClasses}`}>\n        <p className=\"break-words\">{decrypted}</p>\n        <div className=\"text-right text-xs text-gray-300 mt-1\">\n          {new Date(msg.timestamp || Date.now()).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatContainer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}